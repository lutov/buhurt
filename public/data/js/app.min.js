function show_entrance(){var t=$("#entrance_block");t.lightbox_me({closeSelector:".close",centered:!0})}function show_registration(){var t=$("#registration_block");t.lightbox_me({closeSelector:".close",centered:!0})}function set_wanted(t,e){var n=$("#want_"+e),o="btn-outline-success",a="btn-success";if(n.hasClass(o)){var s="/set_wanted/"+t+"/"+e;$.post(s,{},function(t){n.removeClass(o),n.addClass(a),showToast(t)})}}function unset_wanted(t,e){var n=$("#want_"+e),o="btn-outline-success",a="btn-success";if(n.hasClass(a)){var s="/unset_wanted/"+t+"/"+e;$.post(s,{},function(t){n.removeClass(a),n.addClass(o),showToast(t)})}}function set_unwanted(t,e){var n=$("#not_want_"+e),o="btn-outline-danger",a="btn-danger";if(n.hasClass(o)){var s="/set_unwanted/"+t+"/"+e;$.post(s,{},function(t){n.removeClass(o),n.addClass(a),showToast(t)})}}function unset_unwanted(t,e){var n=$("#not_want_"+e),o="btn-outline-danger",a="btn-danger";if(n.hasClass(a)){var s="/unset_unwanted/"+t+"/"+e;$.post(s,{},function(t){n.removeClass(a),n.addClass(o),showToast(t)})}}function add_to_list(t,e,n){var o="/lists/add_to_lists/";$.post(o,{element_data:{element_id:e,element_type:t},list_id:n},function(t){console.log(t)})}function remove_from_list(t,e,n){var o="/lists/remove_from_lists/";$.post(o,{element_data:{element_id:e,element_type:t},list_id:n},function(t){console.log(t)})}function toggle_list(t,e,n){var o=$(n);o.prop("checked")?add_to_list(t,e,o.val()):remove_from_list(t,e,o.val())}function lists(t,e){var n="/lists/get_lists/";$.post(n,{},function(n){var o='<form method="POST">';jQuery.each(n.data,function(n,a){var s="onclick=\"toggle_list('"+t+"', "+e+', this)"';o+="<div>",o+='<input type="checkbox" name="list" id="list_'+a.id+'" value="'+a.id+'" '+s+">",o+="&nbsp;",o+='<label for="list_'+a.id+'">',o+=a.name,o+="</label>",o+="</div>"}),o+="</form>";var a={title:"Добавить в список",message:o,leave:!0};show_popup(a)})}function comment_add(t,e){var n="",o=$("#comment").val();if(""!==o){var a=$("#comment_id"),s=a.val();""===s?(n="/comment/add",$.post(n,{comment:o,section:t,element:e},function(t){var e=$.parseJSON(t);$(".comments").prepend(e.comment_text),$("#comment_form").hide(600)})):(n="/comment/edit",$.post(n,{comment:o,section:t,element:e,id:s},function(t){var e=$.parseJSON(t);$("#comment_"+s).replaceWith(e.comment_text),$("#comment_form").hide(600)}))}}function comment_edit(t){var e=$("#comment_"+t+"_text"),n=$("#comment"),o=$("#comment_id"),a=e.html();a=a.replace(/<br>/g,""),o.val(t),n.val(a),show_comment_form()}function comment_delete(t){if(window.confirm("Удалить комментарий?")){var e="/comment/delete";$.post(e,{id:t},function(e){$("#comment_"+t).hide(600)})}}function show_section(t){location.href="/admin/add/"+t}function expand_genres(t,e){$("#"+e).show(600),$(t).removeClass("symlink")}function bind_genres(t,e){jQuery.each($("#"+t).children("li"),function(t,n){$(this).addClass("active_text"),$(this).click(function(){var t=$("#"+e);""===t.val()?t.val($(this).html()):t.val(t.val()+"; "+$(this).html())})})}function show_popup(t){var e=$("#modal_block"),n=$("#modal_title"),o=$("#modal_content"),a=t.message,s=3e3,i=t.title;n.html(i);var c="";if("achievement"===t.type){var l="";l+='<div class="modal_images">';for(var r in t.images)t.msg_img.hasOwnProperty(r)&&(l+='<img src="/data/img/achievements/'+t.images[r]+'.png" alt="" class="img-fluid">&nbsp;');l+="</div>",c+=l}c+='<div class="modal_text">'+a+"</div>",o.html(c),e.modal(),t.leave||e.on("shown.bs.modal",function(t){setTimeout(function(){e.modal("hide")},s)})}function showToast(t){var e=$("#toast_block"),n=$("#toast_title"),o=$("#toast_content"),a=t.title;n.html(a);var s=t.message;o.html(s),e.toast("show")}$(function(){"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("/service-worker.js").then(function(t){},function(t){})}),function(t,e,n){(e[n]=e[n]||[]).push(function(){try{e.yaCounter25959328=new Ya.Metrika({id:25959328,clickmap:!0,trackLinks:!0,accurateTrackBounce:!0})}catch(t){}});var o=t.getElementsByTagName("script")[0],a=t.createElement("script"),s=function(){o.parentNode.insertBefore(a,o)};a.type="text/javascript",a.async=!0,a.src="https://mc.yandex.ru/metrika/watch.js","[object Opera]"==e.opera?t.addEventListener("DOMContentLoaded",s,!1):s()}(document,window,"yandex_metrika_callbacks"),function(t,e,n,o,a,s,i){t.GoogleAnalyticsObject=a,t[a]=t[a]||function(){(t[a].q=t[a].q||[]).push(arguments)},t[a].l=1*new Date,s=e.createElement(n),i=e.getElementsByTagName(n)[0],s.async=1,s.src=o,i.parentNode.insertBefore(s,i)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-101861790-1","auto"),ga("send","pageview")});