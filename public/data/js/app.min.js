function show_entrance(){var e=$("#entrance_block");e.lightbox_me({closeSelector:".close",centered:!0})}function show_registration(){var e=$("#registration_block");e.lightbox_me({closeSelector:".close",centered:!0})}function like(e,t){var n=$("#want_"+t),o="btn-outline-success",a="btn-success";if(n.hasClass(o)){var s="/like/"+e+"/"+t;$.post(s,{},function(e){n.removeClass(o),n.addClass(a),show_popup(JSON.parse(e))})}}function unlike(e,t){var n=$("#want_"+t),o="btn-outline-success",a="btn-success";if(n.hasClass(a)){var s="/unlike/"+e+"/"+t;$.post(s,{},function(e){n.removeClass(a),n.addClass(o),show_popup(JSON.parse(e))})}}function dislike(e,t){var n=$("#not_want_"+t),o="btn-outline-danger",a="btn-danger";if(n.hasClass(o)){var s="/dislike/"+e+"/"+t;$.post(s,{},function(e){n.removeClass(o),n.addClass(a),show_popup(JSON.parse(e))})}}function undislike(e,t){var n=$("#not_want_"+t),o="btn-outline-danger",a="btn-danger";if(n.hasClass(a)){var s="/undislike/"+e+"/"+t;$.post(s,{},function(e){n.removeClass(a),n.addClass(o),show_popup(JSON.parse(e))})}}function add_to_list(e,t,n){var o="/lists/add_to_lists/";$.post(o,{element_data:{element_id:t,element_type:e},list_id:n},function(e){console.log(e)})}function remove_from_list(e,t,n){var o="/lists/remove_from_lists/";$.post(o,{element_data:{element_id:t,element_type:e},list_id:n},function(e){console.log(e)})}function toggle_list(e,t,n){var o=$(n);o.prop("checked")?add_to_list(e,t,o.val()):remove_from_list(e,t,o.val())}function lists(e,t){var n="/lists/get_lists/";$.post(n,{},function(n){var o='<form method="POST">';jQuery.each(n.data,function(n,a){var s="onclick=\"toggle_list('"+e+"', "+t+', this)"';o+="<div>",o+='<input type="checkbox" name="list" id="list_'+a.id+'" value="'+a.id+'" '+s+">",o+="&nbsp;",o+='<label for="list_'+a.id+'">',o+=a.name,o+="</label>",o+="</div>"}),o+="</form>";var a={title:"Добавить в список",message:o,leave:!0};show_popup(a)})}function scroll_to(e){$("html, body").animate({scrollTop:$(e).offset().top},500)}function show_comment_form(){var e=$("#comment_form");e.show(600),scroll_to(e)}function comment_add(e,t){var n="",o=$("#comment").val();if(""!==o){var a=$("#comment_id"),s=a.val();""===s?(n="/comment/add",$.post(n,{comment:o,section:e,element:t},function(e){var t=$.parseJSON(e);$(".comments").prepend(t.comment_text),$("#comment_form").hide(600)})):(n="/comment/edit",$.post(n,{comment:o,section:e,element:t,id:s},function(e){var t=$.parseJSON(e);$("#comment_"+s).replaceWith(t.comment_text),$("#comment_form").hide(600)}))}}function comment_edit(e){var t=$("#comment_"+e+"_text"),n=$("#comment"),o=$("#comment_id"),a=t.html();a=a.replace(/<br>/g,""),o.val(e),n.val(a),show_comment_form()}function comment_delete(e){if(window.confirm("Удалить комментарий?")){var t="/comment/delete";$.post(t,{id:e},function(t){$("#comment_"+e).hide(600)})}}function show_section(e){location.href="/admin/add/"+e}function expand_genres(e,t){$("#"+t).show(600),$(e).removeClass("symlink")}function bind_genres(e,t){jQuery.each($("#"+e).children("li"),function(e,n){$(this).addClass("active_text"),$(this).click(function(){var e=$("#"+t);""===e.val()?e.val($(this).html()):e.val(e.val()+"; "+$(this).html())})})}function show_popup(e){var t=$("#modal_block"),n=$("#modal_title"),o=$("#modal_content"),a=e.message,s=3e3,i=e.title;n.html(i);var c="";if("achievement"===e.type){var l="";l+='<div class="modal_images">';for(var r in e.images)e.msg_img.hasOwnProperty(r)&&(l+='<img src="/data/img/achievements/'+e.images[r]+'.png" alt="" class="img-fluid">&nbsp;');l+="</div>",c+=l}c+='<div class="modal_text">'+a+"</div>",o.html(c),t.modal(),e.leave||t.on("shown.bs.modal",function(e){setTimeout(function(){t.modal("hide")},s)})}$(function(){"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("/service-worker.js").then(function(e){},function(e){})}),function(e,t,n){(t[n]=t[n]||[]).push(function(){try{t.yaCounter25959328=new Ya.Metrika({id:25959328,clickmap:!0,trackLinks:!0,accurateTrackBounce:!0})}catch(e){}});var o=e.getElementsByTagName("script")[0],a=e.createElement("script"),s=function(){o.parentNode.insertBefore(a,o)};a.type="text/javascript",a.async=!0,a.src="https://mc.yandex.ru/metrika/watch.js","[object Opera]"==t.opera?e.addEventListener("DOMContentLoaded",s,!1):s()}(document,window,"yandex_metrika_callbacks"),function(e,t,n,o,a,s,i){e.GoogleAnalyticsObject=a,e[a]=e[a]||function(){(e[a].q=e[a].q||[]).push(arguments)},e[a].l=1*new Date,s=t.createElement(n),i=t.getElementsByTagName(n)[0],s.async=1,s.src=o,i.parentNode.insertBefore(s,i)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-101861790-1","auto"),ga("send","pageview")});