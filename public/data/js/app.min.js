function set_wanted(t,n){var e=$("#want_"+n),o="btn-outline-success";if(e.hasClass(o)){var s="/set_wanted/"+t+"/"+n;$.post(s,{},function(t){e.removeClass(o),e.addClass("btn-success"),showToast(t)})}}function unset_wanted(t,n){var e=$("#want_"+n),o="btn-success";if(e.hasClass(o)){var s="/unset_wanted/"+t+"/"+n;$.post(s,{},function(t){e.removeClass(o),e.addClass("btn-outline-success"),showToast(t)})}}function set_unwanted(t,n){var e=$("#not_want_"+n),o="btn-outline-danger";if(e.hasClass(o)){var s="/set_unwanted/"+t+"/"+n;$.post(s,{},function(t){e.removeClass(o),e.addClass("btn-danger"),showToast(t)})}}function unset_unwanted(t,n){var e=$("#not_want_"+n),o="btn-danger";if(e.hasClass(o)){var s="/unset_unwanted/"+t+"/"+n;$.post(s,{},function(t){e.removeClass(o),e.addClass("btn-outline-danger"),showToast(t)})}}function show_comment_form(){$("#comment_form").show(600)}function comment_add(t,n){var e="",o=$("#comment").val();if(""!==o){var s=$("#comment_id").val();""===s?(e="/comment/add",$.post(e,{comment:o,section:t,element:n},function(t){var n=$.parseJSON(t);$(".comments").prepend(n.comment_text),$("#comment_form").hide(600)})):(e="/comment/edit",$.post(e,{comment:o,section:t,element:n,id:s},function(t){var n=$.parseJSON(t);$("#comment_"+s).replaceWith(n.comment_text),$("#comment_form").hide(600)}))}}function comment_edit(t){var n=$("#comment_"+t+"_text"),e=$("#comment"),o=$("#comment_id"),s=n.html();s=s.replace(/<br>/g,""),o.val(t),e.val(s),show_comment_form()}function comment_delete(n){if(window.confirm("Удалить комментарий?")){$.post("/comment/delete",{id:n},function(t){$("#comment_"+n).hide(600)})}}function expand_genres(t,n){$("#"+n).show(600),$(t).removeClass("symlink")}function bind_genres(t,e){jQuery.each($("#"+t).children("li"),function(t,n){$(this).addClass("active_text"),$(this).click(function(){var t=$("#"+e);""===t.val()?t.val($(this).html()):t.val(t.val()+"; "+$(this).html())})})}function show_popup(t){var n=$("#modal_block"),e=$("#modal_title"),o=$("#modal_content"),s=t.message,a=t.title;e.html(a);var i="";if("achievement"===t.type){var m="";for(var c in m+='<div class="modal_images">',t.images)t.msg_img.hasOwnProperty(c)&&(m+='<img src="/data/img/achievements/'+t.images[c]+'.png" alt="" class="img-fluid">&nbsp;');i+=m+="</div>"}i+='<div class="modal_text">'+s+"</div>",o.html(i),n.modal(),t.leave||n.on("shown.bs.modal",function(t){setTimeout(function(){n.modal("hide")},3e3)})}function showToast(t){var n=$("#toast_block"),e=$("#toast_title"),o=$("#toast_content"),s=t.title;e.html(s);var a=t.message;o.html(a),n.toast("show")}$(function(){"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("/service-worker.js").then(function(t){},function(t){})})});